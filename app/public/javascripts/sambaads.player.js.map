{"version":3,"sources":["sambaads.player.js"],"names":["SambaAdsPlayerControler","player","view","data","self","this","window","sambaads","parentIframeID","guid","encodeURIComponent","currentMediaId","currentPlaylistIndex","lastPlaylistIndex","newstate","oldstate","startNextIn","pertmitWidthAutoStart","firstPlay","setController","undefined","init","prototype","discoveryHost","url","document","referrer","location","href","sendMessage","smbevent","parent","postMessage","s4","Math","floor","random","toString","substring","sendGif","options","a","$","satmref","hostname","satmfullref","get","done","msg","error","getEnvironment","response","player_info","environment","updateViewsCount","mid","oid","cid","satms","satmtag","satmpid","publisher_info","hash_code","satmoid","satmmid","satmcid","satmenv","updateLoadCount","onMessageReceive","event","params","split","w","innerWidth","documentElement","clientWidth","body","auto_start","play","updateItemCurrent","pause","setMute","calculatePlayerWidth","calculatePlayerHeight","getCurrentVideo","title","seekTo","expandedCinema","getSwf","objectID","sendEvent","initilizeSmbMessanger","evt","addEventListener","attachEvent","discoveryPlaylistInfo","playlistInfo","height","width","plp","tm","category_name","_options","position","playlist_position","playlistStyle","theme","playlist","playlistHeight","playlistWidth","playlist_width","playlist_height","player_width","player_height","captions","color","fontSize","fontFamily","fontOpacity","backgroundColor","backgroundOpacity","edgeStyle","windowColor","windowOpacity","player_config_options","displaytitle","advertising","client","tag","decodeURIComponent","custom_tag","plugins","https://cdn-static-secure.liverail.com/js/LiveRail.AdManager.JWPlayer-6.8.1.plugin.js","LR_ADMAP","LR_URL","LR_TAGS","skin","skin_url","primary","abouttext","aboutlink","jwplayer","setup","onReady","smb","onLoad","onFullscreen","fullscreen","onPlay","computeComscore","setControls","onMute","onPause","fullscreenActive","getPosition","showDisplay","onBuffer","onIdle","hideDisplay","onTime","onBeforeComplete","onComplete","stop","onAdTime","onAdError","onAdImpression","onAdComplete","onBeforePlay","getPlaylistItem","getPlaylistIndex","c5","c3","COMSCORE","beacon","c1","c2","c4","c6","c10","is","outerHeight","length","getPlaylist","loadPlaylist","index","running_youtube","load","videoTitle","innerHTML","mute","Boolean","callInternal","seek_to","seek","playNext","SambaAdsPlayerView","debug","displayOverlayShare","getElementById","displayOverlayPlay","displayOverlayNextVideo","playButtom","videoTitleBar","option","getWidth","getHeight","hide","currentDisplay","style","display","show","text","controller","setShareFacebookUrl","media_id","setShareEmbed","h","innerHeight","clientHeight","css","showPlaylist","click","onclick","shareLastState","clearInterval","input","select","focus","setTimeout","mousemove","offset","top","mouseleave","playVideo","video","playerSetup","setTitleBar","title_text","setShareLink","value","embed","button","log","each","idex","item","id","indexOf","find","vitem","hitem","empty","addClass","forEach","new_v_item","clone","new_h_item","attr","children","image","replace","append","lightSlider","autoWidth","slideMove","slideMargin","mode","useCSS","loop","controls","prevHtml","nextHtml","pager","enableTouch","enableDrag","onSliderLoad","removeClass","nanoScroller","owner_id","i","circleProgress","size","lineCap","thickness","emptyFill","animation","duration","fill","setInterval"],"mappings":"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","file":"sambaads.player.js","sourcesContent":["'use strict';\n\nvar SambaAdsPlayerControler = {};\n\nSambaAdsPlayerControler = function (player, view, data){\n\tvar self = this;\n\twindow.sambaads = {};\n\twindow.sambaads.parentIframeID = \"\";\n\n\tself.player = player;\n\tself.guid = encodeURIComponent(this.guid());\n\tself.view = view;\n\tself.currentMediaId=\"\";\n\tself.currentPlaylistIndex = 0;\n\tself.lastPlaylistIndex = 0;\n\tself.newstate = \"IDLE\";\n\tself.oldstate = null;\n\tself.startNextIn = null;\n\tself.pertmitWidthAutoStart = 320;\n\t//self.propagateMute = null;\n\tself.firstPlay = true;\n\n\tthis.view.setController(this);\n\n\tif(data == undefined || data == null){\n\t\t/*$.get( \"//app.sambaads.com/iframe/846dae1ccb4553649d9706ed535d7f09/data\", \n\t\t\t{ skin: \"blue\" } \n\t\t)\n\t\t.done(function( data ) {\n\t\t\tself.init(data);\n    \t});*/\n\t}else{\n\t\tself.init( data );\n\t}\n};\n\nSambaAdsPlayerControler.prototype.discoveryHost = function(){\n\tvar url = document.referrer || window.location.href\n\t//url = window.location.href\n\t//var a = $('<a>', { href:url } )[0];\n\t//var hostname = a.hostname;\n\n\treturn url;\n};\n\nSambaAdsPlayerControler.prototype.sendMessage = function(smbevent,data){\n\t//console.log(\"IFRAME SENT: \" + window.sambaads.parentIframeID + \"::\" + smbevent + \"::\" + data);\n\twindow.parent.postMessage(window.sambaads.parentIframeID + \"::\" + smbevent + \"::\" + data, \"*\");\n};\n\nSambaAdsPlayerControler.prototype.guid = function() {\n\tfunction s4() {\n\t\treturn Math.floor((1 + Math.random()) * 0x10000)\n\t        .toString(16)\n\t        .substring(1);\n\t\t};\n\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n\t     s4() + '-' + s4() + s4() + s4();\n};\n\n        \n\nSambaAdsPlayerControler.prototype.sendGif = function(options){\n\tvar url = document.referrer || window.location.href\n\tvar a = $('<a>', { href:url } )[0];\n\n\toptions.satmref = a.hostname;\n\toptions.satmfullref = url;\n\n\n    $.get('/* @echo COLLECTOR_URL */', options).done(function(msg) {\n    //$.get('//192.168.0.51:3000/api/v1/collector/satm.gif', options).done(function(msg) {\n\t\t//alert(\"success load cont\");\n\t}).error(function(){\n\t\t\t//alert(\"error load cont\");\n\t});\n\n};\n\nSambaAdsPlayerControler.prototype.getEnvironment = function(){\n\treturn this.response.player_info.environment;\n};\n\nSambaAdsPlayerControler.prototype.updateViewsCount = function(mid, oid, cid){\n\tif (this.currentMediaId != mid) {\n\t  \tthis.currentMediaId = mid;\n\n\t\tthis.sendGif({\n\t\t    \"satms\": this.guid,\n\t\t    \"satmtag\": \"media.play\",\n\t\t    \"satmpid\": this.response.publisher_info.hash_code,\n\t\t    \"satmoid\": oid,\n\t\t    \"satmmid\": mid,\n\t\t    \"satmcid\": cid,\n\t\t    \"satmref\": \"\",\n\t\t    \"satmfullref\": \"\",\n\t\t    'satmenv': this.getEnvironment()\n\t\t});\n\t};\n};\n\nSambaAdsPlayerControler.prototype.updateLoadCount = function(oid, cid){\n\tthis.sendGif({\n\t\"satms\": this.guid,\n\t\"satmtag\": \"media.load\",\n\t\"satmpid\": this.response.publisher_info.hash_code,\n\t\"satmoid\": oid,\n\t\"satmcid\": cid,\n\t\"satmref\": \"\",\n\t\"satmfullref\": \"\",\n\t'satmenv': this.getEnvironment()\n\t});\n};\n\nSambaAdsPlayerControler.prototype.onMessageReceive = function(event){\n\tvar params = event.data.split(\"::\");\n\n\tvar w = window.innerWidth\n\t\t|| document.documentElement.clientWidth\n\t\t|| document.body.clientWidth;\n\n\tif(params[1] == \"play\"){\n\t\tif(this.response.publisher_info.auto_start){\n\t\t\tif(w > this.pertmitWidthAutoStart) {\n\t  \t\t\tthis.play();\n\t  \t\t\tthis.view.updateItemCurrent();\n\t  \t\t}\n\t  \t}\n\t};\n\n\tif(params[1] == \"pause\"){\n\t\tif(this.response.publisher_info.auto_start){\n\t\t\tif(w > this.pertmitWidthAutoStart) {\n\t  \t\t\tthis.pause();\n\t  \t\t}\n\t  \t}\n\t};\n\n\tif(params[1] == \"mute\"){\n\t\tthis.setMute(params[2]);\n\t};\n\n\tif(params[1] == \"ready\"){\n\t\twindow.sambaads.parentIframeID = params[0]; //iframe id received from parent\n\t\tthis.sendMessage(\"ready\",this.response.publisher_info.auto_start + \",\" + this.calculatePlayerWidth() + \",\" + this.calculatePlayerHeight() );\n\t\tthis.sendMessage(\"onNowWatchTitle\", this.getCurrentVideo().title);\n\t};\n\n\tif(params[1] == \"debug\"){\n\t\t// if (console)\n\t\t// \tconsole.log(this);\n\t};\n\n\tif(params[1] == \"seek\"){\n\t\tthis.seekTo(params[2]);\n\t};\n\n\tif(params[1] == \"visible\"){\n\t\tif(params[2] === \"true\"){\n\n\t\t\tif(this.response.publisher_info.auto_start){\n\n\t\t\t\tif(this.newstate != \"PLAYING\"){\n\t\t\t\t\tif(w > this.pertmitWidthAutoStart) {\n\t\t\t  \t\t\tthis.play();\n\t\t\t  \t\t\tthis.view.updateItemCurrent();\n\t\t\t  \t\t}\n\t\t\t  \t\tthis.setMute(false);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setMute(false);\n\t\t\t\t}\n\n\t\t\t\tif(this.firstPlay){\n\t\t\t\t\tthis.firstPlay = false;\n\n\t\t\t\t\tif(w > this.pertmitWidthAutoStart) {\n\t\t\t\t\t\tthis.setMute(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.setMute(false);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.setMute(true);\n\n\t\t\tif(this.newstate == \"PLAYING\"){\n\t\t\t\tif(w > this.pertmitWidthAutoStart) {\n\t  \t\t\t\tthis.pause();\n\t  \t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t};\n\n\tif(params[1] == \"mouseover\"){\n\t\tif(this.newstate != \"IDLE\"){\n\t\t\tthis.setMute(false);\n\t\t}\n\t};\n\n\tif(params[1] == \"expandedCinema\"){\n\t\tif(params[2] == \"clickThrough\"){\n\t  \t\twindow.sambaads.expandedCinema.getSwf(window.sambaads.expandedCinema.objectID).sendEvent('clickThrough');\n\t\t}\n\t};\n};\n\nSambaAdsPlayerControler.prototype.initilizeSmbMessanger = function(){\n\tvar self=this;\n\n\twindow.onMessageReceive = function(evt){\n\t\tself.onMessageReceive(evt);\n\t}\n\n\tif (window.addEventListener){\n\t\twindow.addEventListener(\"message\", window.onMessageReceive, false)\n\t} else {\n\t\tattachEvent(\"onmessage\", window.onMessageReceive)\n\t};\n}\n\n//legacy support\nSambaAdsPlayerControler.prototype.discoveryPlaylistInfo = function(){\n\tvar playlistInfo = {}\n\n\tif ($(document).height() >= $(document).width()) {\n\t\tplaylistInfo.plp = \"bottom-vertical\";\n\t\tplaylistInfo.tm = \"dark\";\n\t} else {\n\t\tplaylistInfo.plp = \"right\";\n\t\tplaylistInfo.tm = \"dark\";\n\t}\n\n\treturn playlistInfo;\n};\n\nSambaAdsPlayerControler.prototype.init = function(data){\n\tvar self = this;\n\tthis.response =  data ;\n\n\tself.updateLoadCount('', this.response.player_info.category_name);\n\n\tthis._options = {\n\t\t\t//position:\"rigth\",\n\t\t\t//position:\"bottom-vertical\",\n\t\t\t//position:\"bottom-horizontal\",\n\t\t\tposition: this.response.player_info.playlist_position || self.discoveryPlaylistInfo().plp,\n\t\t\tplaylistStyle: this.response.player_info.theme || self.discoveryPlaylistInfo().tm,\n\t\t\tplaylist:[]\n\t};\n\n\tif (this._options.position == \"right\") {\n\t\tthis._options.playlistHeight = 0;\n\t\tthis._options.playlistWidth = this.response.player_info.playlist_width   || 280;\n\t}\n\n\tif (this._options.position == \"bottom-vertical\") {\n\t\tthis._options.playlistHeight = this.response.player_info.playlist_height || 150;\n\t\tthis._options.playlistWidth = 0;\n\t} \n\n\tif (this._options.position == \"bottom-horizontal\") {\n\t\tthis._options.playlistWidth = 0;\n\t\tthis._options.playlistHeight = 143;\n\t}\n\n\tthis._options.playlist = this.response.playlist;\n\n\t//calculate player size\n\tvar player_width = this.calculatePlayerWidth();\n\tvar player_height = this.calculatePlayerHeight();\n\n\tvar captions = {\n                color: '#FFFFFF',\n                fontSize: 12,\n                fontFamily: 'verdana-bold, verdana',\n                fontOpacity: 100,\n                backgroundColor: '#000000',\n                backgroundOpacity: 0,\n                edgeStyle: 'dropshadow',\n                windowColor: '#000000',\n                windowOpacity: 0\n    };\n\n    var player_config_options = {\n        displaytitle: false,\n        \n        advertising:{\n          client:'vast',\n          tag: decodeURIComponent(this.response.player_info.custom_tag)\n        },\n\n        plugins: {\n              '/* @echo LIVERAIL_PLUGIN_URL */' : {\n     \t\t\t'LR_ADMAP': 'in::0',\n                'LR_URL': this.discoveryHost(),\n                'LR_TAGS': this.response.publisher_info.auto_start ? \"autostart\" : \"normal\"\n            }\n        },\n     \n        playlist: this._options.playlist,\n        skin: \"http:\" + this.response.player_info.skin_url,\n        width: player_width,\n        height: player_height,\n        captions : captions,\n        //aspectratio: \"16:9\",\n        primary: \"flash\",\n        abouttext: \"SambaAds - no cats playing piano.\",\n        aboutlink: \"http://www.sambaads.com.br/publishers\"\n    };\n\n    if(!this.response.player_info.custom_tag){\n    \tdelete player_config_options.advertising;\n\t} else {\n\t\tdelete player_config_options.plugins;\n\t}\n\n\twindow.jwplayer(this.player).setup(player_config_options);\n\n    window.jwplayer(self.player).onReady(function() {\n\t\tsmb.init(self.player, self._options);\n\t\tself.onLoad();\n    });\n\n    window.jwplayer(self.player).onFullscreen(function(fullscreen){\n    \tsmb.onFullscreen(fullscreen);\n    });\n\n    window.jwplayer(self.player).onPlay(function(evt){\n    \tself.response.publisher_info.auto_start = true;\n    \tself.computeComscore(\"04\",\"sambaads_content\");\n    \twindow.jwplayer(self.player).setControls(true);\n\t\tsmb.onPlay();\n\t\t\n\t\tself.oldstate = self.newstate;\n\t\tself.newstate = evt.newstate;\n\n\t\tself.sendMessage(\"onStateChange\",evt.newstate);\n\t});\n\n\twindow.jwplayer(self.player).onMute(function(evt){\n\t});\n\n\twindow.jwplayer(self.player).onPause(function(evt){\n\n\t\tif(!smb.fullscreenActive){\n\t\t\t//hack para solucionar delay do request de ad...\n\t\t\tif( window.jwplayer(self.player).getPosition() > 1 ){\n\t\t\t\tsmb.showDisplay(\"play\");\n\t\t\t\twindow.jwplayer(self.player).setControls(false);\n\t\t\t} else {\n\t\t\t\tsmb.showDisplay(\"buffer\");\n\t\t\t}\n\t\t} else {\n\t\t\twindow.jwplayer(self.player).setControls(true);\n\t\t}\n\n\t\tself.oldstate = self.newstate;\n\t\tself.newstate = evt.newstate;\n\n\t\tself.sendMessage(\"onStateChange\",evt.newstate);\n\t});\n\n\twindow.jwplayer(self.player).onBuffer(function(evt){\n\n\t\tself.oldstate = self.newstate;\n\t\tself.newstate = evt.newstate;\n\n\t\tsmb.showDisplay(\"buffer\");\n\t});\n\n\twindow.jwplayer(self.player).onIdle(function(evt){\n\t\tsmb.hideDisplay();\n\n\t\tself.oldstate = self.newstate;\n\t\tself.newstate = evt.newstate;\n\t});\n\n\twindow.jwplayer(self.player).onTime(function(evt){\n\t\tsmb.hideDisplay();\n\t});\n\n\twindow.jwplayer(self.player).onBeforeComplete(function(evt){\n\n\t\tself.oldstate = self.newstate;\n\t\tself.newstate = evt.newstate;\n\t});\n\n\twindow.jwplayer(self.player).onComplete(function(evt){\n\n\t\tsmb.onComplete();\n\t\tself.stop();\n\n\t\tself.newstate = \"IDLE\";\n\t\tself.oldstate = \"PLAYING\";\n\t});\n\n\twindow.jwplayer(self.player).onAdTime(function(evt){\n\t\tsmb.hideDisplay();\n\t});\n\n\twindow.jwplayer(self.player).onAdError(function(evt){\n\t\t\n\t\tsmb.hideDisplay();\n\t\t/*\n\t\tif(!self._options.playlist[self.currentPlaylistIndex].running_youtube && (self._options.playlist[self.currentPlaylistIndex].file_youtube.length > 0)){\n\t\t\tself._options.playlist[self.currentPlaylistIndex].running_youtube = true;\n\t\t\twindow.jwplayer(this.player).load({ file: \"http://www.youtube.com/watch?v=\" + self._options.playlist[self.currentPlaylistIndex].file_youtube });\n\t\t\twindow.jwplayer(this.player).play();\n\t\t}\n\t\t*/\n\t});\n\n\twindow.jwplayer(self.player).onAdImpression(function(evt){\n\t\tsmb.hideDisplay();\n\t});\n\n\twindow.jwplayer(self.player).onAdComplete(function(evt){\n\t\t\n\t});\n\n\twindow.jwplayer(self.player).onBeforePlay(function(evt){\n\t\tsmb.hideDisplay();\n\t});\n};\n\nSambaAdsPlayerControler.prototype.onLoad = function(){\n\tthis.computeComscore(\"04\",\"sambaads_content\");\n\tthis.computeComscore(\"01\",\"sambaads_video_advertising\");\n\tthis.initilizeSmbMessanger();\n};\n\nSambaAdsPlayerControler.prototype.getCurrentVideo = function(){\n\treturn window.jwplayer(this.player).getPlaylistItem(window.jwplayer(this.player).getPlaylistIndex());\n};\n\n\nSambaAdsPlayerControler.prototype.computeComscore = function(c5,c3) {\n\tCOMSCORE.beacon({\n\t    c1: 1,\n\t    c2: \"15752844\",\n\t    c3: c3,\n\t    c4: \"\",\n\t    c5: c5,\n\t    c6: \"\",\n\t    c10: \"\"\n\t});\n};\n\nSambaAdsPlayerControler.prototype.calculatePlayerHeight = function(){\n\tvar player_height = 0;\n\tif($(\"#titlebar\").is(':visible')){\n\t\tplayer_height = ( $( document ).height() - $(\"#titlebar\").outerHeight());\n\n\t} else {\n\t\tplayer_height = ( $( document ).height());\n\t};\n\n\tif(this._options.playlist.length > 1){\n\t\tplayer_height = player_height - this._options.playlistHeight;\n\t};\n\n\treturn player_height;\n};\n\nSambaAdsPlayerControler.prototype.calculatePlayerWidth = function(){\n\tvar player_width = 0;\n\n\tplayer_width = $( document ).width();\n\n\tif(this._options.playlist.length > 1){\n\t\tplayer_width = player_width - this._options.playlistWidth;\n\t};\n    \n    return player_width;\n};\n\nSambaAdsPlayerControler.prototype.getPlaylist = function(){\n    return this._options.playlist;\n};\n\nSambaAdsPlayerControler.prototype.loadPlaylist = function(index){\n\tif(this.currentPlaylistIndex != index){\n\t\tthis.stop();\n\t\tthis.lastPlaylistIndex = this.currentPlaylistIndex;\n\t\tthis.currentPlaylistIndex = index;\n\t\tthis._options.playlist[index].running_youtube = false;\n\t\twindow.jwplayer(this.player).load([this._options.playlist[index]]);\n\t}\n\n\tthis.view.videoTitle.innerHTML = this._options.playlist[index].title;\n};\n\nSambaAdsPlayerControler.prototype.setMute = function(mute){\n\tif( typeof Boolean(mute) === 'boolean'){\n\t\twindow.jwplayer(this.player).setMute(mute);\t\t\t\n\t}\n};\n\nSambaAdsPlayerControler.prototype.play = function(){\n    window.jwplayer(this.player).play();\n    window.jwplayer(this.player).callInternal(\"jwCallVPAID\", \"pauseAd\");\n};\n\nSambaAdsPlayerControler.prototype.pause = function(){\n    window.jwplayer(this.player).pause();\n    window.jwplayer(this.player).callInternal(\"jwCallVPAID\", \"pauseAd\");\n};\n\nSambaAdsPlayerControler.prototype.seekTo = function(seek_to){\n    window.jwplayer(this.player).seek(seek_to);\n};\n\nSambaAdsPlayerControler.prototype.stop = function(){\n    window.jwplayer(this.player).stop();\n};\n\nSambaAdsPlayerControler.prototype.playNext = function(){\n    this.loadPlaylist(this.currentPlaylistIndex + 1);\n\twindow.jwplayer(this.player).play();\n};\n\nvar SambaAdsPlayerView = {};\n\nSambaAdsPlayerView = function (){\n\tthis.debug = true;\n\tthis.displayOverlayShare \t = document.getElementById(\"display-overlay-share\");\n\tthis.displayOverlayPlay \t = document.getElementById(\"display-overlay-play\");\n\tthis.displayOverlayNextVideo = document.getElementById(\"display-overlay-next\");\n\t\n\tthis.playButtom = document.getElementById(\"display-buttom-play\");\n\tthis.videoTitleBar = document.getElementById(\"video-title-bar\");\n\tthis.videoTitle = document.getElementById(\"video-title\");\n\t\n};\n\nSambaAdsPlayerView.prototype.showDisplay = function(option){\n\tvar width = window.jwplayer(self.player).getWidth() + \"px\";\n\tvar height = window.jwplayer(self.player).getHeight() + \"px\";\n\n\t$(\"#share-button-dock\").hide();\n\n\tthis.currentDisplay = option;\n\tthis.displayOverlayPlay.style.display \t\t= \"none\";\n\t$(\"#display-overlay-loader\").hide();\n\tthis.displayOverlayShare.style.display \t\t= \"none\";\n\tthis.displayOverlayNextVideo.style.display \t= \"none\";\n\n\tif(option == 'play'){\n\t\tthis.displayOverlayPlay.style.display = \"block\";\n\t\t\n\t\t$(\"#video-title\").show();\n\t\t$(\"#video-title\").text(this.controller.getCurrentVideo().title);\n\n\t\tthis.setShareFacebookUrl(\"/* @echo FACEBOOK_SHARER_URL */?mid=\"+ this.controller.getCurrentVideo().media_id +\"&pid=\"+this.controller.response.publisher_info.hash_code+\"&t=\" + this.controller.getCurrentVideo().title);\n\t\tthis.setShareEmbed(\"<script src=\\\"/* @echo PLAYER_SCRIPT_URL */?\"\n\t\t  \t\t\t+ \"m=\" + this.controller.getCurrentVideo().media_id \n\t\t  \t\t\t+ \"&p=\" + this.controller.response.publisher_info.hash_code\n\t\t  \t\t\t+ \"&sk=blue\"\n\t\t  \t\t\t+ \"&tm=light\" \n\t\t  \t\t\t+ \"&plp=\"\n\t\t  \t\t\t+ \"&plw=\"\n\t\t  \t\t\t+ \"&plh=&w=640&h=360\\\"></script>\");\n\n\t} else if (option == 'buffer'){\n\t\t$(\"#display-overlay-loader\").show();\n\t} else if (option == 'share'){\n\n\t\tvar w = window.innerWidth\n\t\t|| document.documentElement.clientWidth\n\t\t|| document.body.clientWidth;\n\n\t\tvar h = window.innerHeight\n\t\t|| document.documentElement.clientHeight\n\t\t|| document.body.clientHeight;\n\n\t\tif (w<h && (w <= 320)){\n\t\t\t$(\".wrapper-share\").css(\"top\",\"10%\");\n\t\t\t$(\".close-button\").css(\"z-index\", \"101\");\n\n\t\t\t$(\"#btn-select-embed\").css(\"margin-top\",\"10px\");\n\t\t}\n\n\t\tthis.displayOverlayShare.style.display = \"block\";\n\t} else if (option == 'next-video'){\n\t\tthis.displayOverlayNextVideo.style.display = \"block\";\n\t}\n\n\t$('#display-overlay').width(width);\n\t$('#display-overlay').height(height);\n};\n\nSambaAdsPlayerView.prototype.init = function(player, options){\n\tvar self = this;\n\tself.player = player;\n\tself.options = options;\n\n\tself.showDisplay(\"play\");\n\n\tif(options.playlist.length > 1)\n\t\tself.showPlaylist(options);\n\n\t$(\"#display-overlay-loader\").hide();\n\n\t$(\"#display-buttom-play\").click(function() {\n\t\tself.controller.play();\n\t\tself.updateItemCurrent();\n\t});\n\n\tdocument.getElementById(\"share-button-dock\").onclick = function(){\n\t\tself.controller.shareLastState = self.controller.newstate;\n\t\tself.controller.play();\n\t\tself.showDisplay(\"share\");\n\t\t$(\"#share-button-dock\").hide();\n\t}\n\n\tdocument.getElementById(\"share-button\").onclick = function(){\n\t\tself.controller.shareLastState = self.controller.newstate;\n\t\tself.showDisplay(\"share\");\n\t}\n\n\tdocument.getElementById(\"close-button\").onclick = function(){\n\t\tself.showDisplay(\"play\");\n\t\t\n\t\tif(self.shareLastState == \"PLAYING\"){\n\t\t\tself.controller.play();\n\t\t}\n\t}\n\n\tdocument.getElementById(\"next-counter\").onclick = function() {\n\t\tclearInterval(self.controller.startNextIn)\n\t\tself.controller.playNext();\n\t\tself.updateItemCurrent();\n\t};\n\n\tdocument.getElementById(\"replay-button\").onclick = function() {\n\t\tclearInterval(self.controller.startNextIn);\n\t\twindow.jwplayer(self.player).play();\n\t};\n\n\tdocument.getElementById(\"btn-select-embed\").onclick = function() {\n\t\tvar input = document.getElementById(\"share-embed\");\n\n\t\tinput.select();\n\t\tinput.focus();\n\n\t\t$(\"#btn-select-embed\").text(\"ctrl + c para copiar\");\n\n\t\tsetTimeout(function(){\n\t\t\t$(\"#btn-select-embed\").text(\"selecionar embed\");\n\t\t},2000);\n\t};\n\n\t$( \"div.sambaads-embed\" )\n\t.mousemove(function(event) {\n\t\t$(\"#share-button-dock\").css(\"top\", $( \"div.sambaads-embed\" ).offset().top + 11 + \"px\")\n\t\t$(\"#share-button-dock\").css(\"right\", ($( window ).width() - $( \"div.sambaads-embed\" ).width() + 11) + \"px\" )\n\t\t$(\"#share-button-dock\").css(\"z-index\",\"2\")\n\n\t\tif(self.controller.newstate != \"IDLE\" && self.controller.newstate != \"PAUSED\" && self.currentDisplay != \"share\")\n\t\t\t$(\"#share-button-dock\").show();\n\t})\n\t.mouseleave(function(event) {\n\t\t$(\"#share-button-dock\").hide();\n\t});\n\n\t$( \"#share-button-dock\" )\n\t.mousemove(function(event) {\n\t\t$(\"#share-button-dock\").css(\"top\", $( \"div.sambaads-embed\" ).offset().top + 10 + \"px\")\n\t\t$(\"#share-button-dock\").css(\"right\", ($( window ).width() - $( \"div.sambaads-embed\" ).width() + 10) + \"px\" )\n\t\t$(\"#share-button-dock\").css(\"z-index\",\"2\")\n\n\t\tif(self.controller.newstate != \"IDLE\" && self.controller.newstate != \"PAUSED\" && self.currentDisplay != \"share\")\n\t\t\t$(\"#share-button-dock\").show();\n\t}).mouseleave(function(event) {\n\t\t$(\"#share-button-dock\").hide();\n\t});\n};\n\nSambaAdsPlayerView.prototype.playVideo = function(video){\n\tthis.playerSetup.playlist = [video];\n\twindow.jwplayer(self.player).setup(this.playerSetup);\n\tthis.init(self.player);\n};\n\nSambaAdsPlayerView.prototype.hideDisplay = function(){\n\t$(\"#display-overlay-loader\").hide();\n\tthis.displayOverlayPlay.style.display = \"none\";\n\tthis.displayOverlayShare.style.display = \"none\";\n\tthis.displayOverlayNextVideo.style.display = \"none\";\n};\n\nSambaAdsPlayerView.prototype.setTitleBar = function(title_text, color){\n\t$(\"#titlebar\").css(\"backgroundColor\", color);\n\n\tif(title_text.length == 0){\n\t\t$(\"#titlebar\").hide();\n\t} else {\n\t\t$(\"#titlebar-title\").text(decodeURIComponent(title_text));\n\t}\n};\n\nSambaAdsPlayerView.prototype.setShareLink = function(url){\n\tvar input = document.getElementById(\"share-link\");\n\t\n\tif(input)\n\t\tinput.value = url;\n}\n\nSambaAdsPlayerView.prototype.setShareEmbed = function(embed){\n\tvar input = document.getElementById(\"share-embed\");\n\n\tif(input)\n\t\tinput.value = embed;\n}\n\nSambaAdsPlayerView.prototype.setShareFacebookUrl = function(url){\n\tvar button = document.getElementById(\"facebook-url-share\");\n\n\tbutton.href = \"https://www.facebook.com/sharer/sharer.php?u=\" + encodeURIComponent(url);\n};\n\nSambaAdsPlayerView.prototype.setController = function(controller){\n\tthis.controller = controller;\n};\n\nSambaAdsPlayerView.prototype.log = function (msg){\n\t//console.log(msg);\n};\n\nSambaAdsPlayerView.prototype.updateItemCurrent = function(){\n\tvar self = this;\n\n\t$(\"div.playlist-item\").each(function(idex, item){\n\t\tif(item.id.indexOf(self.controller.currentPlaylistIndex) >= 0){\n\t\t\t$(item).find(\"span.video-duration\").text(\"ASSISTINDO\");\n\t\t\t$(item).find(\"span.video-duration\").show();\n\t\t}\n\n\t\tif(item.id.indexOf(self.controller.lastPlaylistIndex) >= 0){\n\t\t\tif(self.controller.lastPlaylistIndex != self.controller.currentPlaylistIndex){\n\t\t\t\t$(item).find(\"span.video-duration\").hide();\n\t\t\t}\n\t\t}\n\t});\n};\n\nSambaAdsPlayerView.prototype.showPlaylist = function(options){\n\tvar self = this;\n\n\tself.vitem = $(\"#playlist-v-item\");\n\tself.hitem = $(\"#playlist-h-item\");\n\n\t$(\"#playlist-v-items\").empty();\n\t$(\"#playlist-h-items\").empty();\n\n\tif(options.position == \"right\"){\n\t\t$($.find(\"div.sambaads-playlist.vertical\")[0]).addClass(options.playlistStyle);\n\t\t$(\"#playlist-h-items\").hide();\n\t\t$(\"#sambaads-embed\").addClass(\"pull-left\");\n\t\t\n\t\t$(\".nano\").css( \"height\", window.jwplayer(self.player).getHeight() );\n\t}else if(options.position == \"bottom-vertical\"){\n\t\t$($.find(\"div.sambaads-playlist.vertical\")[0]).addClass(options.playlistStyle);\n\t\t$(\"#playlist-h-items\").hide();\n\t\t$(\"#playlist-v-items\").show();\n\t\t\n\t\t$(\".nano\").css( \"height\", options.playlistHeight );\n\t}else if(options.position == \"bottom-horizontal\"){\n\t\t$($.find(\"div.sambaads-playlist.horizontal\")[0]).addClass(options.playlistStyle);\n\t\t$(\"#playlist-h-items\").show();\n\t}\n\n\tthis.controller.getPlaylist().forEach(function(item){\n\t\tvar new_v_item = self.vitem.clone();\n\t\tvar new_h_item = self.hitem.clone();\n\n\t\tnew_v_item.attr(\"id\", \"v-\" + $(\"#playlist-v-items\").children().length);//item.mediaid || item.id);\n\t\tnew_h_item.find(\"div.playlist-item\").attr(\"id\", \"h-\" + $(\"#playlist-h-items\").children().length);\n\t\t$(new_v_item).find(\"img\").attr('src',item.image)\n\t\t$(new_h_item).find(\"img\").attr('src',item.image)\n\n\t\t$(new_v_item).find(\"div.video-description h4 a\").text(item.title.replace(/^(.{30}[^\\s]*).*/, \"$1\") + \"\\n\");\n\t\t$(new_h_item).find(\"div.video-description h4 a\").text(item.title.replace(/^(.{30}[^\\s]*).*/, \"$1\") + \"\\n\");\n\n\t\t$(\"#playlist-v-items\").append(new_v_item);\n\t\t$(\"#playlist-h-items\").append(new_h_item);\n\t});\n\n\t$(\".sambaads-playlist\").show();\n\n\t$(\"#playlist-h-items\").lightSlider({\n\t\titem: 3,\n\t\tautoWidth: true,\n\t\tslideMove: 1, // slidemove will be 1 if loop is true\n\t\tslideMargin: 0,\n\t\tmode: \"slide\",\n\t\tuseCSS: true,\n\t\tloop: true,\n\t\tcontrols: true,\n\t\tprevHtml: '<i class=\"icon-previous\"></i>',\n        nextHtml: '<i class=\"icon-next\"></i>',\n\t\tpager: false,\n\t\tenableTouch:false,\n        enableDrag:false,\n\t\tonSliderLoad: function() {\n\t\t\t$('#autoWidth').removeClass('cS-hidden');\n\t\t}\n\t});\n\n\t$(\".nano\").nanoScroller();\n\n\n\t$( \"div.playlist-item\" ).click(function() {\n\t\tvar index = this.id.split(\"-\")[1];\n\n\t\tself.controller.loadPlaylist(+index);\n\t\tself.controller.play();\n\n\t\tself.updateItemCurrent();\n\t});\n};\n\nSambaAdsPlayerView.prototype.onPlay = function(){\n\tthis.hideDisplay();\n\n\tthis.controller.updateViewsCount(\n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].media_id, \n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].owner_id, \n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].category_name);\n\n\tif(this.options.playlist[this.controller.currentPlaylistIndex + 1]) {\n\t\t$(\"#video-next-title\").text(this.options.playlist[this.controller.currentPlaylistIndex + 1].title);\n\t\t$(\"#video-next-thumbnail\").attr('src',this.options.playlist[this.controller.currentPlaylistIndex + 1].image);\n\t}\n}\n\nSambaAdsPlayerView.prototype.onFullscreen = function(evt){\n\tvar width = window.jwplayer(this.controller.player).getWidth() + \"px\";\n\tvar height = window.jwplayer(this.controller.player).getHeight() + \"px\";\n\n\tif(!evt.fullscreen){\n\t\tthis.fullscreenActive = false;\n\t\t$('#display-overlay').width(width);\n\t\t$('#display-overlay').height(height);\n\t} else {\n\t\tthis.fullscreenActive = true;\n\t}\n}\n\nSambaAdsPlayerView.prototype.onComplete = function(){\n\tvar self = this;\n\tvar i = 10;\n\n\tif(self.controller.currentPlaylistIndex + 1 < self.options.playlist.length) {\n\t\tself.showDisplay(\"next-video\");\n\n\t\t$('.progress-circle').circleProgress({\n\t\t\tvalue: 1.0,\n\t\t\tsize: 36,\n\t\t\tlineCap: 'round',\n\t\t\tthickness: 2,\n\t\t\temptyFill: 'rgba(255, 255, 255, 0.1)',\n\t\t\tanimation: { duration: 12000 },\n\t\t\tfill: { color: '#fff' }\n\t\t});\n\n\t\t$(\"#counter-down\").text(i);\n\t\tself.startNextIn = setInterval(function(){\n\t\t\t$(\"#counter-down\").text(i);\n\t\t\tif(i==0){\n\t\t\t\tself.hideDisplay();\n\t\t\t\tself.controller.playNext();\n\t\t\t\tclearInterval(self.startNextIn)\n\t\t\t\tself.updateItemCurrent();\n\t\t\t}\n\t\t\ti--\n\t\t},1000);\n\t} else {\n\t\tself.showDisplay(\"play\");\n\t}\n};"],"sourceRoot":"/source/"}