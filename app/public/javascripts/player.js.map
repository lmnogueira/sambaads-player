{"version":3,"sources":["player.js"],"names":["ViewabilityMonitorPlugin","cw","currentIframe","this","visiblePlayTimeout","toClearTimeout","isElementInViewport","el","jQuery","rect","getBoundingClientRect","top","left","bottom","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","fireIfElementVisible","self","visible","setTimeout","clearTimeout","setVisible","handler","getElementById","id","addEventListener","attachEvent","ExpandedCinema","sendEvent","iframeId","event","player","sambaads","getPlayer","contentWindow","postMessage","iframe_target_host","scrollOffset","scrOfX","scrOfY","window","pageYOffset","pageXOffset","body","scrollLeft","scrollTop","expandedCinema","detectContainerPositions","viewportOffset","e","load","_swfUrl","width","height","dcp","split","wrapper","createElement","style","innerHTML","appendChild","onclick","evt","close","btnClose","btnCloseImg","parentNode","removeChild","detectScript","currentScript","scripts","getElementsByTagName","length","src","indexOf","location","players","i","parseQueryString","url","queries","temp","l","queryString","params","initializePluginsAfeterReady","insertAfter","referenceNode","newNode","parentElement","insertBefore","nextSibling","appendIframe","parameters","div","iframe_id","iframe_url","width_height","m","mid","p","pid","c","cid","t","tags","sk","tm","plp","plw","plh","ct","tb","tbbg","tbfs","rfr","encodeURIComponent","href","request_domain","w","h","firstChild","iframe_data","dimension","d","protocol","isReady","sendMessage","smbevent","data","doPlay","setMute","doPause","seek","seek_position","debug","push","init","crossMessageInitialization","forEach","onMouseOver","state","removeEventListener","onMessageReceive","origin","clearInterval","player_width","player_height","setInterval"],"mappings":"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","file":"player.js","sourcesContent":["//CLASS VIEWABILITY MONITOR PLUGIN\n'use strict';\n\tvar ViewabilityMonitorPlugin = function (cw, currentIframe){\n\t\tthis.visiblePlayTimeout = 1000;\n\t\tcurrentIframe.toClearTimeout = 0;\n\n\t\tthis.isElementInViewport = function (el) {\n\t\t\t//special bonus for those using jQuery\n\t\t\tif (typeof jQuery === \"function\" && el instanceof jQuery) {\n\t\t\t\tel = el[0];\n\t\t\t}\n\n\t\t\tvar rect = el.getBoundingClientRect();\n\t\t\treturn (\n\t\t\t\trect.top >= 0 &&\n\t\t\t\trect.left >= 0 &&\n\t\t\t\trect.bottom <= (cw.innerHeight || document.documentElement.clientHeight) && //or $(window).height()\n\t\t\t \trect.right <= (cw.innerWidth || document.documentElement.clientWidth) //or $(window).width()\n\t\t\t);\n\t\t};\n\n\t\tthis.fireIfElementVisible = function(el) {\n\t\t  var self = this;\n\t\t  return function () {\n\t\t      if ( self.isElementInViewport(el) ){\n\t\t      \tif(!currentIframe.visible){\n\t\t\t      \tcurrentIframe.visible = true; //all visible on the window\n\n\t\t\t      \tcurrentIframe.toClearTimeout = setTimeout(function(){\n\t\t\t      \t\tclearTimeout(currentIframe.toClearTimeout);\n\t\t\t\t\t\tcurrentIframe.setVisible(true);\n\n\t\t\t      \t},  self.visiblePlayTimeout);\n\t\t\t   \t}\n\t\t      } else {\n\t\t      \tclearTimeout(currentIframe.toClearTimeout);\n\t\t      \tif(currentIframe.visible){\n\t\t      \t\tcurrentIframe.visible = false;\n\t\t      \t\tcurrentIframe.setVisible(false);\n\t\t\t    }\n\t\t      }\n\t\t  }\n\t\t};\n\n\t\tcurrentIframe.handler = this.fireIfElementVisible (document.getElementById(currentIframe.id));\n\n\t    if (cw.addEventListener){\n\t\t\t\tcw.addEventListener(\"DOMContentLoaded\", currentIframe.handler, false);\n\t\t\t\tcw.addEventListener(\"load\", currentIframe.handler, false);\n\t\t\t\tcw.addEventListener(\"resize\", currentIframe.handler, false);\n\t\t\t\tcw.addEventListener(\"scroll\", currentIframe.handler, false);\n\t\t} else {\n\t\t\t\tcw.attachEvent(\"DOMContentLoaded\", currentIframe.handler)\n\t\t\t\tcw.attachEvent(\"load\", currentIframe.handler)\n\t\t\t\tcw.attachEvent(\"resize\", currentIframe.handler)\n\t\t\t\tcw.attachEvent(\"scroll\", currentIframe.handler)\n\t\t};\n\n\t};\n\n//CLASS EXPANDED CINEMA PLUGIN\nvar ExpandedCinema = function (cw, currentIframe){\n\n\tthis.sendEvent = function(iframeId, event){\n\t\tvar player = cw.sambaads.getPlayer(iframeId);\n\t\tplayer.contentWindow().postMessage( player.id + \"::expandedCinema::\" + event, player.iframe_target_host )\n\t};\n\n\tthis.scrollOffset = function() {\n\t\tvar scrOfX = 0, \n\t\t\tscrOfY = 0;\n\n\t\tif( typeof( window.pageYOffset ) == 'number' ) {\n\t\t\tscrOfY = window.pageYOffset;\n\t\t\tscrOfX = window.pageXOffset;\n\t\t} else if( document.body && ( document.body.scrollLeft || document.body.scrollTop ) ) {\n\t\t\tscrOfY = document.body.scrollTop;\n\t\t\tscrOfX = document.body.scrollLeft;\n\t\t} else if( document.documentElement && ( document.documentElement.scrollLeft || document.documentElement.scrollTop ) ) {\n\t\t\tscrOfY = document.documentElement.scrollTop;\n\t\t\tscrOfX = document.documentElement.scrollLeft;\n\t\t}\n\n\t\tcw.sambaads.expandedCinema.scrOfX = scrOfX;\n\t\tcw.sambaads.expandedCinema.scrOfY = scrOfY;\n\t};\t\n\n\tthis.detectContainerPositions = function(iframeId){\n\t\ttry{\n\t\t\tvar el = document.getElementById(iframeId);\n\t\t\tvar viewportOffset = el.getBoundingClientRect();\n\t\t\tvar top = viewportOffset.top;\n\t\t\tvar left = viewportOffset.left;\t\n\n\t\t\treturn top + \",\" + left;\n\t\t}\n\t\tcatch(e){}\n\t};\n\n\tthis.load = function(_swfUrl, width, height, iframeId){\n\t\t\ttry {\n\n\t\t\t\tthis.scrollOffset();\n\n\t\t\t\tvar dcp = this.detectContainerPositions(iframeId);\n\n\t\t\t\tvar top = dcp.split(\",\")[0];\n\t\t\t\tvar left = dcp.split(\",\")[1];\n\n\t\t\t\tvar wrapper= document.createElement('div');\n\t\t\t\twrapper.id = \"sambaadsExpandedCinema.\" + iframeId;\n\t\t\t\twrapper.style[\"position\"] = \"absolute\";\n\t\t\t\twrapper.style[\"margin-left\"] = \"0px\";\n\t\t\t\twrapper.style[\"box-sizing\"] = \"border-box\";\n\t\t\t\twrapper.style[\"margin-top\"] = \"0px\";\n\t\t\t\twrapper.style[\"text-align\"] = \"left\";\n\t\t\t\twrapper.style[\"z-index\"] = \"300000002\";\n\t\t\t\twrapper.style[\"cursor\"] = \"pointer\";\n\n\t\t\t\twrapper.innerHTML=\"<a id='btnClose.\" + iframeId + \"' href='#' style='width: 30px;position: absolute;margin-left: 98%;margin-top: -1.5%; display:none;'><img id='btnCloseImg.\" + iframeId + \"' src='//d3655zppehxyvi.cloudfront.net/lib/close.png' style='width: 30px; display:none;'></a><object id='sambaads_expanded_cinema_swf.\" + iframeId + \"' classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' name='sambaads_expanded_cinema_swf.\" + iframeId + \"'><param name='movie' value='\" + _swfUrl + \"?playerWidth=\"+width+\"&amp;playerHeight=\"+height+\"&amp;playerTop=\"+top+\"&amp;playerLeft=\"+left+\"&amp;iframeId=\"+iframeId+\"'><param name='wmode' value='transparent'><param name='allowfullscreen' value='true'><param name='align' value='middle'><param name='allowscriptaccess' value='always'><embed src='\" + _swfUrl + \"?playerWidth=\"+width+\"&amp;playerHeight=\"+height+\"&amp;playerTop=\"+top+\"&amp;playerLeft=\"+left+\"&amp;iframeId=\"+iframeId+\"' wmode='transparent' quality='high' id='sambaads_expanded_cinema_swf_embed.\" + iframeId + \"' name='sambaads_expanded_cinema_swf_embed.\" + iframeId + \"' align='middle' allowscriptaccess='always' allowfullscreen='true' type='application/x-shockwave-flash' pluginspage='http://www.macromedia.com/go/getflashplayer'></object>\";\n\n\t\t\t\tdocument.body.appendChild(wrapper);\n\n\t\t\t\tdocument.getElementById(\"btnClose.\" + iframeId).onclick = function(evt) {\n\t\t\t\t\twindow.sambaads.expandedCinema.close(iframeId);\n\t\t\t\t\treturn false;\n      \t\t\t};\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tvar btnClose = document.getElementById('btnClose.' + iframeId);\n\t\t\t\t\tvar btnCloseImg = document.getElementById('btnCloseImg.' + iframeId);\n\t\t\t\t\t\n\t\t\t\t\tbtnClose.style[\"display\"] = \"block\";\n\t\t\t\t\tbtnCloseImg.style[\"display\"] = \"block\";\n\t\t\t\t}, 5000);\n\n\t\t\t} catch(e) { \n\t\t\t\t//console.log(e); \n\t\t\t} \n\t};\n\n\tthis.close = function(iframeId){\n\t\ttry {\n\t\t\t//console.log(iframeId);\n\t\t\tvar wrapper= document.getElementById('sambaadsExpandedCinema.' + iframeId);\n\t\t\twrapper.parentNode.removeChild(wrapper);\t\t\t\t\t\t\t\t\t\t\t\n\t\t} catch(e) {} \n\t};\n};\n\n(function(cw){ \n\n\tvar detectScript = function(){\n\t\tvar currentScript = document.currentScript || (function() {\n      \t\tvar scripts = document.getElementsByTagName('script');\n\n      \t\tif(scripts[scripts.length - 1].src.indexOf(\"player.sambaads.com\") != 0)\n      \t\t\treturn scripts[scripts.length - 1];\n    \t})();\n\n    \treturn currentScript;\n\t}\n\n\t//initialize with client window\n\tvar currentScript = detectScript();\n\tvar currentLocation = cw.location;\n\tvar currentIframe = {}\n\t\n\tif(!cw.sambaads){ \n\t\tcw.sambaads = {};\n\t\tcw.sambaads.players = []\n\n\t\tcw.sambaads.getPlayer = function(iframeId){\n\n\t\t\tiframeId = iframeId || \"sambaads_0\";\n\n\t\t\tfor (var i = 0; i < cw.sambaads.players.length; i++) { \n\t\t\t\tif(cw.sambaads.players[i].id == iframeId){\n\t\t\t\t\treturn cw.sambaads.players[i];\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t};\n\n\t//parse querystring paramenters from url\n\tvar parseQueryString = function( url ) {\n\n\t\tvar queryString = url.split(\"?\")[1];\n\t\tvar params = {}, queries, temp, i, l;\n\n\t\t// Split into key/value pairs\n\t\ttry{\n\t\t\tqueries = queryString.split(\"&\");\n\n\t\t\t// Convert the array of strings into an object\n\t\t\tfor ( i = 0, l = queries.length; i < l; i++ ) {\n\t\t\t\ttemp = queries[i].split('=');\n\t\t\t\tparams[temp[0]] = temp[1];\n\t\t\t}\n\t\t} catch (e){\n\t\t\t//console.log(e);\n\t\t}\n\n\t\treturn params;\n\t};\n\n\tvar serialize = function(obj) {\n\t  \tvar str = [];\n\t  \tfor(var p in obj){\n\t    \tif (obj.hasOwnProperty(p)) {\n\t      \t\tstr.push(encodeURIComponent(p) + \"=\" + obj[p]);\n\t    \t}\n\t\t}\n\t  \treturn str.join(\"&\");\n\t}\n\n\tvar initializePluginsAfeterReady = function(){\n\t\t//initializing the Monitor viewability\n\t\tnew ViewabilityMonitorPlugin(cw, currentIframe);\n\n\t\t//initializing Expanded Cinema Plugin\n\t\tcw.sambaads.expandedCinema = new ExpandedCinema(cw, currentIframe);\n\t}\n\n\tvar insertAfter = function (referenceNode, newNode) {\n    \treferenceNode.parentElement.insertBefore(newNode, referenceNode.nextSibling);\n    \t//referenceNode.parentElement.removeChild(referenceNode);\n\t};\n\n\tvar appendIframe = function(parameters){\n\t\tvar div = document.createElement('div');\n\t\tvar iframe_id = \"sambaads_\" + cw.sambaads.players.length;\n\t\tvar iframe_url = \"\";\n\t\tvar width_height = \"\";\n\n\t\tparameters.m = parameters.m || parameters.mid || \"\";\n\t\tparameters.p = parameters.p || parameters.pid || \"\";\n\t\tparameters.c = parameters.c || parameters.cid || \"\";\n\t\tparameters.t = parameters.t || parameters.tags || \"\";\n\t\tparameters.sk = parameters.sk || \"\";\n\t\tparameters.tm = parameters.tm || \"\";\n\t\tparameters.plp = parameters.plp || \"\";\n\t\tparameters.plw = parameters.plw || \"\";\n\t\tparameters.plh = parameters.plh || \"\";\n\t\tparameters.ct = parameters.ct || \"\";\n\t\tparameters.tb = parameters.tb || \"\";\n\t\tparameters.tbbg = parameters.tbbg || \"\";\n\t\tparameters.tbfs = parameters.tbfs || \"\";\n\t\tparameters.rfr = encodeURIComponent(window.location.href);\n\t\t//parameters.rfr = encodeURIComponent(\"http://vimh.co/2015/03/entendendo-marketing-de-uma-forma-inesquecivel\")\n\n\n\t\t//se não conseguir obter ao menos o publisher ID não deve renderizar o iframe\n\t\tif(!parameters.p)\n\t\t\treturn;\n\t\t\n\t\tiframe_url = \"//\" + parameters.request_domain + \"/iframe/\" + parameters.p + \"?\";\n\n\t\tif (parameters.m){\n\t\t\tiframe_url = iframe_url +\n\t\t\t\t\"m=\" + parameters.m +\n\t\t\t\t\"&t=\" + parameters.t +\n\t\t\t\t\"&sk=\" + parameters.sk +\n\t\t\t\t\"&tm=\" + parameters.tm +\n\t\t\t\t\"&plp=\" + parameters.plp +\n\t\t\t\t\"&plw=\" + parameters.plw +\n\t\t\t\t\"&plh=\" + parameters.plh +\n\t\t\t\t\"&ct=\" + parameters.ct +\n\t\t\t\t\"&tb=\" + encodeURIComponent(parameters.tb) +\n\t\t\t\t\"&tbbg=\" + parameters.tbbg +\n\t\t\t\t\"&tbfs=\" + parameters.tbfs +\n\t\t\t\t\"&rfr=\" + parameters.rfr\n\t\t} else {\n\t\t\tiframe_url = iframe_url +\n\t\t\t\"c=\" + parameters.c +\n\t\t\t\"&t=\" + parameters.t +\n\t\t\t\"&sk=\" + parameters.sk +\n\t\t\t\"&tm=\" + parameters.tm +\n\t\t\t\"&plp=\" + parameters.plp +\n\t\t\t\"&plw=\" + parameters.plw +\n\t\t\t\"&plh=\" + parameters.plh +\n\t\t\t\"&ct=\" + parameters.ct +\n\t\t\t\"&tb=\" + encodeURIComponent(parameters.tb) +\n\t\t\t\"&tbbg=\" + parameters.tbbg +\n\t\t\t\"&tbfs=\" + parameters.tbfs +\n\t\t\t\"&rfr=\" + parameters.rfr\n\t\t}\n\n\t\tif(parameters.w){\n\t\t\twidth_height = \"width=\\\"\" + parameters.w + \"\\\" \";\n\t\t}\n\n\t\tif(parameters.h){\n\t\t\twidth_height = width_height + \"height=\\\"\" + parameters.h + \"\\\" \";\n\t\t}\n\n\t\t//generate iframe embed\n\t\tif(parameters.m || parameters.c){\n\t\t\tdiv.innerHTML = \"<iframe id=\\\"\" + iframe_id + \"\\\" \" + width_height + \"src=\\\"\" + iframe_url + \"\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\"  webkitallowfullscreen mozallowfullscreen allowFullScreen></iframe>\";\n\t\t} else {\n\t\t\tdiv.innerHTML = \"<div id='sambaads_now_whatch_div' class='sambaads_now_whatch_div'><div style='margin-bottom: 10px;text-align: -webkit-left; text-align: left;'><h2 id='sambaads_now_whatch' class='sambaads_now_whatch' style='margin-top:10px;margin-bottom:10px; width: auto; font-family: verdana, arial, sans-serif;display: inline-block; margin-right: 5px; color:#000000; font-weight: bold; font-size:1.5em;'>ASSISTA AGORA:</h2><span id='sambaads_now_whatch_title_\" + iframe_id + \"' class='sambaads_now_whatch_title' style='font-family: verdana, arial, sans-serif; color:#126cb0;font-size:1.1em; font-weight: bold;'></span></div><iframe id=\\\"\" + iframe_id + \"\\\" \" + width_height + \"src=\\\"\" + iframe_url + \"\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\"  webkitallowfullscreen mozallowfullscreen allowFullScreen></iframe><div style='height: 30px;'><p style=\\\"font-size: 11px; margin: 0px; color: #B0B0B0; text-align: left; text-align: -webkit-left;\\\">powered by <a href=\\\"//www.sambaads.com.br/?utm_campaign=Recomendador&utm_medium=Powered&utm_source=PlayerRecomendador\\\"><img src='//d366amxgkdfvcq.cloudfront.net/images/sambaads-logo.png' style='vertical-align:middle; width:100px !important; height: 24px !important'></a></p></div></div>\";\n\t\t}\n\n\t\t//Put iframe after de <script> tag\n\t\tinsertAfter(currentScript, div.firstChild);\n\n\t\tvar iframe_data = {\n\t\t\tid : iframe_id,\n\t\t\tpid : parameters.p || parameters.pid || \"\",\n\t\t\tmid : parameters.m || parameters.mid || \"\",\n\t\t\tcid : parameters.c || parameters.cid || \"\",\n\t\t\tplw : parameters.plw || 0,\n\t\t\tplh : parameters.plh || 0,\n\t\t\tdimension : parameters.d || parameters.dimension,\n\t\t\twidth: parameters.w,\n\t\t\theight: parameters.h,\n\t\t\tiframe_target_host: cw.location.protocol + \"//\" + parameters.request_domain,\n\t\t\ttoClearTimeout: 0,\n\t\t\tisReady: false,\n\t\t\tcontentWindow: function(){\n\t\t\t\treturn document.getElementById(this.id).contentWindow;\n\t\t\t},\n\t\t\tsendMessage: function(smbevent,data){\n\t\t\t\tif(this.contentWindow().postMessage){\n\t\t\t\t\tthis.contentWindow().postMessage( this.id + \"::\" + smbevent + \"::\" + data, this.iframe_target_host )\n\t\t\t\t}\n\t\t\t},\n\t\t\tdoPlay:function(){\n\t\t\t\t\n\t\t\t\tif(this.contentWindow().postMessage){\n\t\t\t\t\t//console.log(\"CORE SEND:\" + this.id + \"::play::\");\n\t\t\t\t\tthis.contentWindow().postMessage( this.id + \"::play::\", this.iframe_target_host )\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t},\n\t\t\tsetVisible:function(data){\n\t\t\t\t\n\t\t\t\tif(this.contentWindow().postMessage){\n\t\t\t\t\t//console.log(\"CORE SEND:\" + this.id + \"::play::\");\n\t\t\t\t\tthis.contentWindow().postMessage( this.id + \"::visible::\" + data, this.iframe_target_host )\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t},\n\t\t\tsetMute:function(data){\n\t\t\t\t\n\t\t\t\tif(this.contentWindow().postMessage){\n\t\t\t\t\t//console.log(\"CORE SEND:\" + this.id + \"::play::\");\n\t\t\t\t\tthis.contentWindow().postMessage( this.id + \"::mute::\" + data, this.iframe_target_host )\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t},\n\t\t\tdoPause:function(){\n\t\t\t\tif(this.contentWindow().postMessage){\n\t\t\t\t\t//console.log(\"CORE SEND:\" + this.id + \"::pause::\");\n\t\t\t\t\tthis.contentWindow().postMessage( this.id + \"::pause::\", this.iframe_target_host )\n\t\t\t\t}\n\t\t\t},\n\t\t\tseek:function(seek_position){\n\t\t\t\tif(this.contentWindow().postMessage){\n\t\t\t\t\t//console.log(\"CORE SEND:\" + this.id + \"::pause::\");\n\t\t\t\t\tthis.contentWindow().postMessage( this.id + \"::seek::\"+seek_position, this.iframe_target_host )\n\t\t\t\t}\n\t\t\t},\n\t\t\tdebug:function(){\n\t\t\t\tif(this.contentWindow().postMessage){\n\t\t\t\t\t//console.log(\"CORE SEND:\" + this.id + \"::pause::\");\n\t\t\t\t\tthis.contentWindow().postMessage( this.id + \"::debug::\", this.iframe_target_host )\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t//get the iframeId controled by this script\n\t\tcurrentIframe = iframe_data;\n\n\t\t//store all player embeded on the same page\n\t\tcw.sambaads.players.push(iframe_data);\n\n\t\treturn iframe_data;\n\t};\n\n\tvar init = function(){\t\t\n\t\t//parser = new DOMParser()\n\t\t//console.log(\"Initializing SambaAds JS Player!\");\n\n\n\t\t//initialize parameters\n\t\tvar parameters = parseQueryString(currentScript.src);\t\n\n\t\tparameters.w = parameters.w ? parameters.w : \"100%\";\n\t\tparameters.h = parameters.h ? parameters.h : \"100%\";\n\t\tparameters.request_domain = parameters.debug == \"true\" ? \"localhost\" : \"d366amxgkdfvcq.cloudfront.net\";\n\n\t\t//append the iframe player\n\t\tvar iframe_data = appendIframe(parameters);\n\n\t\t//initializing the crossdomain message support\n\t\tcrossMessageInitialization(iframe_data);\n\n\t\t//adding listener to iframe elements\n\t\tfor (var i = 0; i < document.getElementsByTagName(\"iframe\").length; i++){\n\t\t\tcw.sambaads.players.forEach(function(p){\n\t\t\t\tif(document.getElementsByTagName(\"iframe\")[i].id == p.id){\n\t\t\t\t\tif(!p.onMouseOver){\n\t\t\t\t\t\tp.onMouseOver = function(event){\n\t\t\t\t\t\t\tif(p.state == \"PLAYING\" || p.state == \"PAUSED\") {\n\t\t\t\t\t\t\t\tp.sendMessage(\"mouseover\",\"\");\n\t\t\t\t\t\t\t\tdocument.getElementById(p.id).removeEventListener(\"mouseover\", p.onMouseOver);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdocument.getElementsByTagName(\"iframe\")[i].addEventListener(\"mouseover\", p.onMouseOver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t};\n\n\tvar onMessageReceive = function(event){\n\t\tif(event.origin.indexOf(\"cloudfront\") >= 0 || event.origin.indexOf(\"localhost\") >= 0){\n\n\t\t\tvar params = event.data.split(\"::\");\n\n\t\t\tif(params[0] == currentIframe.id){\n\t\t\t\t//console.log(\"CORE RECEIVED:\" + event.data)\n\n\t\t\t\tif (params[1] == \"ready\" ){\n\t\t  \t\t\tclearInterval(currentIframe.isReady);\n\t\t  \t\t\tcurrentIframe.isReady = true;\n\t\t  \t\t\tcurrentIframe.player_width = params[2].split(\",\")[1];\n\t\t  \t\t\tcurrentIframe.player_height = params[2].split(\",\")[2] - 4; //- 4 pixels ajust\n\t\t  \t\t\tinitializePluginsAfeterReady();\n\t\t \t\t}\n\n\t\t \t\tif (params[1] == \"onStateChange\" ){\n\t\t  \t\t\tcurrentIframe.state = params[2];\n\t\t \t\t}\n\n\t\t \t\tif (params[1] == \"loadExpandedCinema\" ){\n\t\t  \t\t\tvar player = cw.sambaads.getPlayer(params[0]);\n\t\t  \t\t\tcw.sambaads.expandedCinema.load(params[2], player.player_width, player.player_height, player.id);\n\t\t \t\t}\n\n\t\t \t\tif (params[1] == \"removeExpandedCinema\" ){\n\t\t  \t\t\tvar player = cw.sambaads.getPlayer(params[0]);\n\t\t  \t\t\tcw.sambaads.expandedCinema.close(player.id);\n\t\t \t\t}\n\n\t\t \t\tif (params[1] == \"onNowWatchTitle\" ) {\n\t\t \t\t\t//console.log(params[2])\n\t\t \t\t\tif(document.getElementById(\"sambaads_now_whatch_title_\" + params[0])){\n\t\t \t\t\t\tdocument.getElementById(\"sambaads_now_whatch_title_\" + params[0]).innerHTML = params[2];\n\t\t \t\t\t}\n\t\t \t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar crossMessageInitialization = function(){\n\t\tif (cw.addEventListener){\n\t\t\tcw.addEventListener(\"message\", onMessageReceive, false)\n\t\t} else {\n\t\t\tattachEvent(\"onmessage\", onMessageReceive)\n\t\t};\n\t\t\n\t\tcurrentIframe.isReady = setInterval(function(){\n\t\t\tcurrentIframe.sendMessage(\"ready\",\"\")\n\t\t},2000)\n\t}\n\n\tinit();\n})(this);"],"sourceRoot":"/source/"}