{"version":3,"sources":["sambaads.widget.view.js","sambaads.widget.controller.js"],"names":["WidgetController","params","data","self","this","currentMediaId","currentPlaylistIndex","lastPlaylistIndex","playlist","playerInfo","player_info","publisherInfo","publisher_info","iframeId","window","location","hash","split","SambaAdsWidgetView","debug","displayOverlayShare","document","getElementById","displayOverlayPlay","displayOverlayNextVideo","playButtom","videoTitleBar","videoTitle","prototype","showDisplay","option","init","widget","controller","getPlaylist","length","showPlaylist","options","playVideo","video","playerSetup","hideDisplay","$","hide","style","display","updateItemCurrent","each","idex","item","id","indexOf","find","text","show","playlistInfo","height","width","plp","tm","_options","position","playlist_position","playlistStyle","theme","playlistWidth","playlistHeight","hitem","empty","addClass","forEach","new_h_item","clone","attr","children","image","title","replace","hash_code","media_id","append","lightSlider","autoWidth","slideMove","slideMargin","mode","useCSS","loop","controls","prevHtml","nextHtml","pager","enableTouch","enableDrag","onSliderLoad","removeClass","nanoScroller","click","play","onPlay","updateViewsCount","owner_id","category_name","getPlaylistItem","index","getCurrentItem","element","link_url","target","win","open","focus","sendMessage","JSON","stringify","publisherId","mediaId","description","load","first_argument","smbevent","parent","postMessage"],"mappings":"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","file":"sambaads.widget.js","sourcesContent":["var SambaAdsWidgetView = {};\n\nSambaAdsWidgetView = function (){\n\tthis.debug = true;\n\tthis.displayOverlayShare \t = document.getElementById(\"display-overlay-share\");\n\tthis.displayOverlayPlay \t = document.getElementById(\"display-overlay-play\");\n\tthis.displayOverlayNextVideo = document.getElementById(\"display-overlay-next\");\n\t\n\tthis.playButtom = document.getElementById(\"display-buttom-play\");\n\tthis.videoTitleBar = document.getElementById(\"video-title-bar\");\n\tthis.videoTitle = document.getElementById(\"video-title\");\n\t\n};\n\nSambaAdsWidgetView.prototype.showDisplay = function(option){};\n\nSambaAdsWidgetView.prototype.init = function(widget){\n\tvar self = this;\n\tthis.controller = widget;\n\n\tself.showDisplay(\"play\");\n\n\tif(this.controller.getPlaylist().length > 1)\n\t\tself.showPlaylist(self.options());\n};\n\nSambaAdsWidgetView.prototype.playVideo = function(video){\n\tthis.playerSetup.playlist = [video];\n};\n\nSambaAdsWidgetView.prototype.hideDisplay = function(){\n\t$(\"#display-overlay-loader\").hide();\n\tthis.displayOverlayPlay.style.display = \"none\";\n\tthis.displayOverlayShare.style.display = \"none\";\n\tthis.displayOverlayNextVideo.style.display = \"none\";\n};\n\n\nSambaAdsWidgetView.prototype.updateItemCurrent = function(){\n\tvar self = this;\n\n\t$(\"div.playlist-item\").each(function(idex, item){\n\t\tif(item.id.indexOf(self.controller.currentPlaylistIndex) >= 0){\n\t\t\t$(item).find(\"span.video-duration\").text(\"ASSISTIU\");\n\t\t\t$(item).find(\"span.video-duration\").show();\n\t\t}\n\n\t\tif(item.id.indexOf(self.controller.lastPlaylistIndex) >= 0){\n\t\t\tif(self.controller.lastPlaylistIndex != self.controller.currentPlaylistIndex){\n\t\t\t\t$(item).find(\"span.video-duration\").hide();\n\t\t\t}\n\t\t}\n\t});\n};\n\nSambaAdsWidgetView.prototype.options = function(){\n\tvar self = this;\n\n\tvar playlistInfo = {}\n\n\tif ($(document).height() >= $(document).width()) {\n\t\tplaylistInfo.plp = \"bottom-vertical\";\n\t\tplaylistInfo.tm = \"dark\";\n\t} else {\n\t\tplaylistInfo.plp = \"right\";\n\t\tplaylistInfo.tm = \"dark\";\n\t}\n\n\tvar _options = {\n\t\t\tposition: this.controller.playerInfo.playlist_position || playlistInfo.plp,\n\t\t\tplaylistStyle: this.controller.playerInfo.theme || playlistInfo.tm,\n\t\t\tplaylist:[]\n\t};\n\n\tif (_options.position == \"bottom-horizontal\") {\n\t\t_options.playlistWidth = 0;\n\t\t_options.playlistHeight = 143;\n\t}\n\n\treturn _options;\n};\n\n\nSambaAdsWidgetView.prototype.showPlaylist = function(options){\n\tvar self = this;\n\n\tself.hitem = $(\"#playlist-h-item\");\n\n\t$(\"#playlist-h-items\").empty();\n\n\tif(options.position == \"bottom-horizontal\"){\n\t\t$($.find(\"div.sambaads-playlist.horizontal\")[0]).addClass(options.playlistStyle);\n\t\t$(\"#playlist-h-items\").show();\n\t}\n\n\tthis.controller.getPlaylist().forEach(function(item){\n\t\tvar new_h_item = self.hitem.clone();\n\n\t\tnew_h_item.find(\"div.playlist-item\").attr(\"id\", \"h-\" + $(\"#playlist-h-items\").children().length);\n\n\t\t$(new_h_item).find(\"img\").attr('src',item.image);\n\n\t\t$(new_h_item).find(\"div.video-description h4 a\").text(item.title.replace(/^(.{30}[^\\s]*).*/, \"$1\") + \"\\n\");\n\n\t\t$(new_h_item).find(\"a\").attr('data-href', \"/* @echo PLAYER_IFRAME_URL */\" + self.controller.publisherInfo.hash_code + \"?m=\" + item.media_id);\n\n\t\t$(\"#playlist-h-items\").append(new_h_item);\n\t});\n\n\t$(\".sambaads-playlist\").show();\n\n\t$(\"#playlist-h-items\").lightSlider({\n\t\titem: 3,\n\t\tautoWidth: true,\n\t\tslideMove: 1, // slidemove will be 1 if loop is true\n\t\tslideMargin: 0,\n\t\tmode: \"slide\",\n\t\tuseCSS: true,\n\t\tloop: true,\n\t\tcontrols: true,\n\t\tprevHtml: '<i class=\"icon-previous\"></i>',\n        nextHtml: '<i class=\"icon-next\"></i>',\n\t\tpager: false,\n\t\tenableTouch:false,\n        enableDrag:false,\n\t\tonSliderLoad: function() {\n\t\t\t$('#autoWidth').removeClass('cS-hidden');\n\t\t}\n\t});\n\n\t$(\".nano\").nanoScroller();\n\n\n\t$( \"div.playlist-item\" ).click(function() {\n\t\tself.controller.play(this);\n\t\tself.updateItemCurrent();\n\t});\n};\n\nSambaAdsWidgetView.prototype.onPlay = function(){\n\tthis.controller.updateViewsCount(\n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].media_id, \n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].owner_id, \n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].category_name);\n};","function WidgetController(params, data){\n\tvar self = this;\n\tself.params = params;\n\tself.currentMediaId=\"\";\n\tself.currentPlaylistIndex = 0;\n\tself.lastPlaylistIndex = 0;\n\tself.data = data;\n\tself.playlist = data.playlist;\n\tself.playerInfo = data.player_info;\n\tself.publisherInfo = data.publisher_info;\n\tself.iframeId = window.location.hash.split(\"#\")[1];\n}\n\nWidgetController.prototype.getPlaylistItem = function(index) {\n\treturn this.playlist[index];\n};\n\nWidgetController.prototype.getCurrentItem = function() {\n\treturn this.getPlaylistItem(this.currentPlaylistIndex)\n}\n\n\nWidgetController.prototype.getPlaylist = function() {\n\treturn this.playlist;\n};\n\nWidgetController.prototype.play = function(element) {\n\tvar index = element.id.split(\"-\")[1];\n\tthis.currentPlaylistIndex = index;\n\tvar link_url = $(element).find(\"a\")[0];\n\tif(this.params.target == \"blank\"){\n\t\tvar win = window.open($(link_url).data(\"href\"), '_blank');\n\t\twin.focus();\n\t}else{\n\t\tthis.sendMessage(\"click\", JSON.stringify({publisherId: this.publisherInfo.hash_code, mediaId: this.getCurrentItem().media_id, description: this.getCurrentItem().description}));\n\t}\n};\n\nWidgetController.prototype.load = function(first_argument) {\n\t// self.updateLoadCount('', this.controller.playerInfo.category_name);\n};\n\n\nWidgetController.prototype.sendMessage = function(smbevent,data){\n\t// console.log(\"IFRAME SENT: \" + this.iframeId + \"::\" + smbevent + \"::\" + data);\n\twindow.parent.postMessage(this.iframeId + \"::\" + smbevent + \"::\" + data, \"*\");\n};"],"sourceRoot":"/source/"}