{"version":3,"sources":["sambaads.widget.view.js","sambaads.widget.controller.js"],"names":["WidgetController","params","data","self","this","currentMediaId","currentPlaylistIndex","lastPlaylistIndex","playlist","playerInfo","player_info","publisherInfo","publisher_info","SambaAdsWidgetView","debug","displayOverlayShare","document","getElementById","displayOverlayPlay","displayOverlayNextVideo","playButtom","videoTitleBar","videoTitle","prototype","showDisplay","option","init","widget","controller","getPlaylist","length","showPlaylist","options","playVideo","video","playerSetup","hideDisplay","$","hide","style","display","updateItemCurrent","each","idex","item","id","indexOf","find","text","show","playlistInfo","height","width","plp","tm","_options","position","playlist_position","playlistStyle","theme","playlistWidth","playlistHeight","hitem","empty","addClass","forEach","new_h_item","clone","attr","children","image","title","replace","hash_code","media_id","append","lightSlider","autoWidth","slideMove","slideMargin","mode","useCSS","loop","controls","prevHtml","nextHtml","pager","enableTouch","enableDrag","onSliderLoad","removeClass","nanoScroller","click","play","onPlay","updateViewsCount","owner_id","category_name","getPlaylistItem","index","element","split","link_url","target","win","window","open","focus","console","log","load","first_argument"],"mappings":"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","file":"sambaads.widget.js","sourcesContent":["var SambaAdsWidgetView = {};\n\nSambaAdsWidgetView = function (){\n\tthis.debug = true;\n\tthis.displayOverlayShare \t = document.getElementById(\"display-overlay-share\");\n\tthis.displayOverlayPlay \t = document.getElementById(\"display-overlay-play\");\n\tthis.displayOverlayNextVideo = document.getElementById(\"display-overlay-next\");\n\t\n\tthis.playButtom = document.getElementById(\"display-buttom-play\");\n\tthis.videoTitleBar = document.getElementById(\"video-title-bar\");\n\tthis.videoTitle = document.getElementById(\"video-title\");\n\t\n};\n\nSambaAdsWidgetView.prototype.showDisplay = function(option){};\n\nSambaAdsWidgetView.prototype.init = function(widget){\n\tvar self = this;\n\tthis.controller = widget;\n\n\tself.showDisplay(\"play\");\n\n\tif(this.controller.getPlaylist().length > 1)\n\t\tself.showPlaylist(self.options());\n};\n\nSambaAdsWidgetView.prototype.playVideo = function(video){\n\tthis.playerSetup.playlist = [video];\n};\n\nSambaAdsWidgetView.prototype.hideDisplay = function(){\n\t$(\"#display-overlay-loader\").hide();\n\tthis.displayOverlayPlay.style.display = \"none\";\n\tthis.displayOverlayShare.style.display = \"none\";\n\tthis.displayOverlayNextVideo.style.display = \"none\";\n};\n\n\nSambaAdsWidgetView.prototype.updateItemCurrent = function(){\n\tvar self = this;\n\n\t$(\"div.playlist-item\").each(function(idex, item){\n\t\tif(item.id.indexOf(self.controller.currentPlaylistIndex) >= 0){\n\t\t\t$(item).find(\"span.video-duration\").text(\"ASSISTIU\");\n\t\t\t$(item).find(\"span.video-duration\").show();\n\t\t}\n\n\t\tif(item.id.indexOf(self.controller.lastPlaylistIndex) >= 0){\n\t\t\tif(self.controller.lastPlaylistIndex != self.controller.currentPlaylistIndex){\n\t\t\t\t$(item).find(\"span.video-duration\").hide();\n\t\t\t}\n\t\t}\n\t});\n};\n\nSambaAdsWidgetView.prototype.options = function(){\n\tvar self = this;\n\n\tvar playlistInfo = {}\n\n\tif ($(document).height() >= $(document).width()) {\n\t\tplaylistInfo.plp = \"bottom-vertical\";\n\t\tplaylistInfo.tm = \"dark\";\n\t} else {\n\t\tplaylistInfo.plp = \"right\";\n\t\tplaylistInfo.tm = \"dark\";\n\t}\n\n\tvar _options = {\n\t\t\tposition: this.controller.playerInfo.playlist_position || playlistInfo.plp,\n\t\t\tplaylistStyle: this.controller.playerInfo.theme || playlistInfo.tm,\n\t\t\tplaylist:[]\n\t};\n\n\tif (_options.position == \"bottom-horizontal\") {\n\t\t_options.playlistWidth = 0;\n\t\t_options.playlistHeight = 143;\n\t}\n\n\treturn _options;\n};\n\n\nSambaAdsWidgetView.prototype.showPlaylist = function(options){\n\tvar self = this;\n\n\tself.hitem = $(\"#playlist-h-item\");\n\n\t$(\"#playlist-h-items\").empty();\n\n\tif(options.position == \"bottom-horizontal\"){\n\t\t$($.find(\"div.sambaads-playlist.horizontal\")[0]).addClass(options.playlistStyle);\n\t\t$(\"#playlist-h-items\").show();\n\t}\n\n\tthis.controller.getPlaylist().forEach(function(item){\n\t\tvar new_h_item = self.hitem.clone();\n\n\t\tnew_h_item.find(\"div.playlist-item\").attr(\"id\", \"h-\" + $(\"#playlist-h-items\").children().length);\n\n\t\t$(new_h_item).find(\"img\").attr('src',item.image);\n\n\t\t$(new_h_item).find(\"div.video-description h4 a\").text(item.title.replace(/^(.{30}[^\\s]*).*/, \"$1\") + \"\\n\");\n\t\t\n\t\t$(new_h_item).find(\"a\").attr('data-href', \"//192.168.33.10:3000/player/\" + self.controller.publisherInfo.hash_code + \"?m=\" + item.media_id);\n\n\t\t$(\"#playlist-h-items\").append(new_h_item);\n\t});\n\n\t$(\".sambaads-playlist\").show();\n\n\t$(\"#playlist-h-items\").lightSlider({\n\t\titem: 3,\n\t\tautoWidth: true,\n\t\tslideMove: 1, // slidemove will be 1 if loop is true\n\t\tslideMargin: 0,\n\t\tmode: \"slide\",\n\t\tuseCSS: true,\n\t\tloop: true,\n\t\tcontrols: true,\n\t\tprevHtml: '<i class=\"icon-previous\"></i>',\n        nextHtml: '<i class=\"icon-next\"></i>',\n\t\tpager: false,\n\t\tenableTouch:false,\n        enableDrag:false,\n\t\tonSliderLoad: function() {\n\t\t\t$('#autoWidth').removeClass('cS-hidden');\n\t\t}\n\t});\n\n\t$(\".nano\").nanoScroller();\n\n\n\t$( \"div.playlist-item\" ).click(function() {\n\t\tself.controller.play(this);\n\t\tself.updateItemCurrent();\n\t});\n};\n\nSambaAdsWidgetView.prototype.onPlay = function(){\n\tthis.controller.updateViewsCount(\n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].media_id, \n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].owner_id, \n\t\t\tthis.options.playlist[this.controller.currentPlaylistIndex].category_name);\n};","function WidgetController(params, data){\n\tvar self = this;\n\t// self.guid = encodeURIComponent(this.guid());\n\tself.params = params;\n\tself.currentMediaId=\"\";\n\tself.currentPlaylistIndex = 0;\n\tself.lastPlaylistIndex = 0;\n\tself.data = data;\n\tself.playlist = data.playlist;\n\tself.playerInfo = data.player_info;\n\tself.publisherInfo = data.publisher_info;\n}\n\nWidgetController.prototype.getPlaylistItem = function(index) {\n\treturn this.playlist[index];\n};\n\nWidgetController.prototype.getPlaylist = function() {\n\treturn this.playlist;\n};\n\nWidgetController.prototype.play = function(element) {\n\tvar index = element.id.split(\"-\")[1];\n\tthis.currentPlaylistIndex = index;\n\tvar link_url = $(element).find(\"a\")[0];\n\tif(this.params.target == \"blank\"){\n\t\tvar win = window.open($(link_url).data(\"href\"), '_blank');\n\t\twin.focus();\n\t}else{\n\t\tconsole.log(\"abrir modal\");\n\t}\n};\n\nWidgetController.prototype.load = function(first_argument) {\n\t// self.updateLoadCount('', this.controller.playerInfo.category_name);\n};"],"sourceRoot":"/source/"}