"use strict";function WidgetController(t,i){var e=this;e.params=t,e.currentMediaId="",e.currentPlaylistIndex=0,e.lastPlaylistIndex=0,e.data=i,e.playlist=i.playlist,e.playerInfo=i.player_info,e.publisherInfo=i.publisher_info,e.iframeId=window.location.hash.split("#")[1]}var SambaAdsWidgetView={};SambaAdsWidgetView=function(){this.debug=!0,this.displayOverlayShare=document.getElementById("display-overlay-share"),this.displayOverlayPlay=document.getElementById("display-overlay-play"),this.displayOverlayNextVideo=document.getElementById("display-overlay-next"),this.playButtom=document.getElementById("display-buttom-play"),this.videoTitleBar=document.getElementById("video-title-bar"),this.videoTitle=document.getElementById("video-title")},SambaAdsWidgetView.prototype.showDisplay=function(t){},SambaAdsWidgetView.prototype.init=function(t){var i=this;this.controller=t,i.showDisplay("play"),this.controller.getPlaylist().length>1&&i.showPlaylist(i.options())},SambaAdsWidgetView.prototype.playVideo=function(t){this.playerSetup.playlist=[t]},SambaAdsWidgetView.prototype.hideDisplay=function(){$("#display-overlay-loader").hide(),this.displayOverlayPlay.style.display="none",this.displayOverlayShare.style.display="none",this.displayOverlayNextVideo.style.display="none"},SambaAdsWidgetView.prototype.updateItemCurrent=function(){var t=this;$("div.playlist-item").each(function(i,e){e.id.indexOf(t.controller.currentPlaylistIndex)>=0&&($(e).find("span.video-duration").text("ASSISTIU"),$(e).find("span.video-duration").show()),e.id.indexOf(t.controller.lastPlaylistIndex)>=0&&t.controller.lastPlaylistIndex!=t.controller.currentPlaylistIndex&&$(e).find("span.video-duration").hide()})},SambaAdsWidgetView.prototype.options=function(){var t={};$(document).height()>=$(document).width()?(t.plp="bottom-vertical",t.tm="dark"):(t.plp="right",t.tm="dark");var i={position:this.controller.playerInfo.playlist_position||t.plp,playlistStyle:this.controller.playerInfo.theme||t.tm,playlist:[]};return"bottom-horizontal"==i.position&&(i.playlistWidth=0,i.playlistHeight=143),i},SambaAdsWidgetView.prototype.showPlaylist=function(t){var i=this;i.hitem=$("#playlist-h-item"),$("#playlist-h-items").empty(),"bottom-horizontal"==t.position&&($($.find("div.sambaads-playlist.horizontal")[0]).addClass(t.playlistStyle),$("#playlist-h-items").show()),this.controller.getPlaylist().forEach(function(t){var e=i.hitem.clone();e.find("div.playlist-item").attr("id","h-"+$("#playlist-h-items").children().length),$(e).find("img").attr("src",t.image),$(e).find("div.video-description h4 a").text(t.title.replace(/^(.{30}[^\s]*).*/,"$1")+"\n"),$(e).find("a").attr("data-href","//9bb0910a.ngrok.io/player/"+i.controller.publisherInfo.hash_code+"?m="+t.media_id),$("#playlist-h-items").append(e)}),$(".sambaads-playlist").show(),$("#playlist-h-items").lightSlider({item:3,autoWidth:!0,slideMove:1,slideMargin:0,mode:"slide",useCSS:!0,loop:!0,controls:!0,prevHtml:'<i class="icon-previous"></i>',nextHtml:'<i class="icon-next"></i>',pager:!1,enableTouch:!1,enableDrag:!1,onSliderLoad:function(){$("#autoWidth").removeClass("cS-hidden")}}),$(".nano").nanoScroller(),$("div.playlist-item").click(function(){i.controller.play(this),i.updateItemCurrent()})},SambaAdsWidgetView.prototype.onPlay=function(){this.controller.updateViewsCount(this.options.playlist[this.controller.currentPlaylistIndex].media_id,this.options.playlist[this.controller.currentPlaylistIndex].owner_id,this.options.playlist[this.controller.currentPlaylistIndex].category_name)},WidgetController.prototype.getPlaylistItem=function(t){return this.playlist[t]},WidgetController.prototype.getCurrentItem=function(){return this.getPlaylistItem(this.currentPlaylistIndex)},WidgetController.prototype.getPlaylist=function(){return this.playlist},WidgetController.prototype.play=function(t){var i=t.id.split("-")[1];this.currentPlaylistIndex=i;var e=$(t).find("a")[0];if("blank"==this.params.target){var l=window.open($(e).data("href"),"_blank");l.focus()}else this.sendMessage("click",JSON.stringify({publisherId:this.publisherInfo.hash_code,mediaId:this.getCurrentItem().media_id,description:this.getCurrentItem().description}))},WidgetController.prototype.load=function(t){},WidgetController.prototype.sendMessage=function(t,i){window.parent.postMessage(this.iframeId+"::"+t+"::"+i,"*")};
//# sourceMappingURL=sambaads.widget.js.map