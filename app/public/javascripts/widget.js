"use strict";!function(e){function t(){}var n=function(){var e=document.currentScript||function(){var e=document.getElementsByTagName("script");return 0!=e[e.length-1].src.indexOf("widget.sambaads.com")?e[e.length-1]:void 0}();return e},i=n(),a=(e.location,{});e.sambaads||(e.sambaads={},e.sambaads.players=[],e.sambaads.getPlayer=function(t){t=t||"sambaads_0";for(var n=0;n<e.sambaads.players.length;n++)if(e.sambaads.players[n].id==t)return e.sambaads.players[n]});var s=function(e){var t,n,i,a,s=e.split("?")[1],o={};try{for(t=s.split("&"),i=0,a=t.length;a>i;i++)n=t[i].split("="),o[n[0]]=n[1]}catch(l){}return o},o=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+(e[n]||""));return t.join("&")},l=function(e,t){e.parentElement.insertBefore(t,e.nextSibling)},d=function(t){var n=document.createElement("div"),s="sambaads_"+e.sambaads.players.length,d="",r="";if(t.rfr=encodeURIComponent(window.location.href),t.p){d="//"+t.request_domain+"/widget/"+t.p+"?"+o(t),t.w&&(r='width="'+t.w+'" '),t.h&&(r=r+'height="'+t.h+'" '),n.innerHTML='<iframe id="'+s+'" '+r+'src="'+d+"#"+s+'" frameborder="0" scrolling="no"  webkitallowfullscreen mozallowfullscreen allowFullScreen></iframe>',l(i,n.firstChild);var c={id:s,pid:t.p||t.pid||"",mid:t.m||t.mid||"",cid:t.c||t.cid||"",plw:t.plw||0,plh:t.plh||0,dimension:t.d||t.dimension,width:t.w,height:t.h,iframe_target_host:e.location.protocol+"//"+t.request_domain,toClearTimeout:0,isReady:!1,contentWindow:function(){return document.getElementById(this.id).contentWindow},sendMessage:function(e,t){this.contentWindow().postMessage&&this.contentWindow().postMessage(this.id+"::"+e+"::"+t,this.iframe_target_host)}};return a=c,e.sambaads.players.push(c),c}},r=function(){var e=s(i.src);e.w=e.w?e.w:"100%",e.h=e.h?e.h:"100%",e.request_domain="192.168.33.10:3000";var t=d(e);m(t)},c=function(e){if(e.origin.indexOf("cloudfront")>=0||e.origin.indexOf("192.168.33.10:3000")>=0){var n=e.data.split("::");if(n[0]==a.id&&("ready"==n[1]&&(clearInterval(a.isReady),a.isReady=!0,a.player_width=n[2].split(",")[1],a.player_height=n[2].split(",")[2]-4,initializePluginsAfeterReady()),"click"==n[1])){var i=new t;i.open(JSON.parse(n[2]))}}},m=function(){e.addEventListener?e.addEventListener("message",c,!1):attachEvent("onmessage",c),a.isReady=setInterval(function(){a.sendMessage("ready","")},2e3)};r(),t.prototype.createElementPlayer=function(e){var t=document.getElementsByClassName("sambaads-modal-body")[0],n=document.createElement("div"),i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n.style.position="absolute",n.id="div-master",t.appendChild(n);var s=document.createElement("div");s.style.backgroundColor="#fff",s.style.padding="13px",n.appendChild(s);var o=document.createElement("div");o.style.height="360px",o.style.width="640px";var l=document.createElement("script");l.type="text/javascript",l.src="/javascripts/player.js?m="+e.mediaId+"&p="+e.publisherId+"&sk=blue&tm=light&tb=&tbbg=&w=640&h=360&debug=true",o.appendChild(l),s.appendChild(o);var d=document.createElement("div");d.style.width="640px";var r=document.createElement("div");r.textContent=e.title,r.style.fontSize="1.5em",r.style.color="#000",r.style.fontFamily="helvetica,sans-serif",r.style.fontWeight="bold",r.style.textAlign="left",r.style.margin="10px 10px",d.appendChild(r);var c=document.createElement("div");c.textContent=e.description,c.style.fontSize="0.99em",c.style.color="#000",c.style.margin="0 10px",c.style.fontFamily="helvetica,sans-serif",c.style.textAlign="justify",d.appendChild(c);var m=document.createElement("div");m.style.fontSize="0.8em",m.style.fontWeight="bold",m.style.margin="10px 0 0px 10px",m.style.textAlign="left",m.textContent=e.tagList,d.appendChild(m),s.appendChild(d),n.style.top=(a-n.clientHeight)/2+"px",n.style.left=(i-n.clientWidth)/2+"px"},t.prototype.defineStylePage=function(e){var t=document.getElementsByTagName("body")[0];e.className="sambaads-modal-body",e.style.position="fixed",e.style.top="0",e.style.right="0",e.style.bottom="0",e.style.left="0",e.style.zIndex="99999999",e.style.backgroundColor="rgba(0, 0, 0, 0.9)",e.style.textAlign="center",e.style.overflow="auto",t.appendChild(e)},t.prototype.open=function(e){var t=document.createElement("div");this.createListeners(t),this.defineStylePage(t),this.createElementPlayer(e)},t.prototype.close=function(){var e=document.getElementsByTagName("body")[0],t=document.getElementsByClassName("sambaads-modal-body")[0];e.removeChild(t)},t.prototype.createListeners=function(e){var t=this;e.onclick=function(){t.close()}},e.sambaads.SambaadsModal=t}(this);
//# sourceMappingURL=widget.js.map