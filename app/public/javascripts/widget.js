"use strict";!function(e){function t(){}var n=function(){var e=document.currentScript||function(){var e=document.getElementsByTagName("script");return 0!=e[e.length-1].src.indexOf("widget.sambaads.com")?e[e.length-1]:void 0}();return e},a=n(),i=(e.location,{});e.sambaads||(e.sambaads={},e.sambaads.players=[],e.sambaads.getPlayer=function(t){t=t||"sambaads_0";for(var n=0;n<e.sambaads.players.length;n++)if(e.sambaads.players[n].id==t)return e.sambaads.players[n]});var s=function(e){var t,n,a,i,s=e.split("?")[1],o={};try{for(t=s.split("&"),a=0,i=t.length;i>a;a++)n=t[a].split("="),o[n[0]]=n[1]}catch(r){}return o},o=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+(e[n]||""));return t.join("&")},r=function(e,t){e.parentElement.insertBefore(t,e.nextSibling)},d=function(t){var n=document.createElement("div"),s="sambaads_"+e.sambaads.players.length,d="",l="";if(t.rfr=encodeURIComponent(window.location.href),t.p){d="//"+t.request_domain+"/widget/"+t.p+"?"+o(t),t.w&&(l='width="'+t.w+'" '),t.h&&(l=l+'height="'+t.h+'" '),n.innerHTML='<iframe id="'+s+'" '+l+'src="'+d+"#"+s+'" frameborder="0" scrolling="no"  webkitallowfullscreen mozallowfullscreen allowFullScreen></iframe>',r(a,n.firstChild);var c={id:s,pid:t.p||t.pid||"",mid:t.m||t.mid||"",cid:t.c||t.cid||"",plw:t.plw||0,plh:t.plh||0,dimension:t.d||t.dimension,width:t.w,height:t.h,iframe_target_host:e.location.protocol+"//"+t.request_domain,toClearTimeout:0,isReady:!1,contentWindow:function(){return document.getElementById(this.id).contentWindow},sendMessage:function(e,t){this.contentWindow().postMessage&&this.contentWindow().postMessage(this.id+"::"+e+"::"+t,this.iframe_target_host)}};return i=c,e.sambaads.players.push(c),c}},l=function(){var e=s(a.src);e.w=e.w?e.w:"100%",e.h=e.h?e.h:"100%",e.request_domain="9bb0910a.ngrok.io";var t=d(e);m(t)},c=function(e){if(e.origin.indexOf("cloudfront")>=0||e.origin.indexOf("9bb0910a.ngrok.io")>=0){var n=e.data.split("::");if(n[0]==i.id&&("ready"==n[1]&&(clearInterval(i.isReady),i.isReady=!0,i.player_width=n[2].split(",")[1],i.player_height=n[2].split(",")[2]-4,initializePluginsAfeterReady()),"click"==n[1])){var a=new t;a.open(JSON.parse(n[2]))}}},m=function(){e.addEventListener?e.addEventListener("message",c,!1):attachEvent("onmessage",c),i.isReady=setInterval(function(){i.sendMessage("ready","")},2e3)};l(),t.prototype.createElementPlayer=function(e){var t=document.getElementsByClassName("sambaads-modal-body")[0],n=document.createElement("div"),a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n.style.position="relative",n.style.top=(a-360)/2+"px",t.appendChild(n);var i=document.createElement("script");i.type="text/javascript",i.src="/javascripts/player.js?m="+e.mediaId+"&p="+e.publisherId+"&sk=blue&tm=light&tb=&tbbg=&w=640&h=360&debug=true",n.appendChild(i);var s=document.createElement("div");s.textContent=e.description,s.style.fontSize="14px",s.style.color="#fff",s.style.margin="0 26%",s.style.fontFamily="sans-serif",s.style.textAlign="justify",n.appendChild(s)},t.prototype.defineStylePage=function(e){var t=document.getElementsByTagName("body")[0];e.className="sambaads-modal-body",e.style.position="fixed",e.style.top="0",e.style.right="0",e.style.bottom="0",e.style.left="0",e.style.zIndex="99999999",e.style.backgroundColor="rgba(0, 0, 0, 0.9)",e.style.textAlign="center",t.appendChild(e)},t.prototype.open=function(e){var t=document.createElement("div");this.createListeners(t),this.defineStylePage(t),this.createElementPlayer(e)},t.prototype.close=function(){var e=document.getElementsByTagName("body")[0],t=document.getElementsByClassName("sambaads-modal-body")[0];e.removeChild(t)},t.prototype.createListeners=function(e){var t=this;e.onclick=function(){t.close()}},e.sambaads.SambaadsModal=t}(this);
//# sourceMappingURL=widget.js.map